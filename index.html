<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typeform - clone</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
        integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <section>
            <form id="contact-form">
                <label id="firstname" class="is-visible">
                    <label class="label-heading" for="firstname">What's your firstname?</label>
                    <input id="firstname-input" name="name" type="text" placeholder="firstname" required />
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('firstname','surname')">OK
                            <i class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('firstname','surname')"></i>
                    </div>
                </label>

                <label id="surname">
                    <label class="label-heading" for="surname">What's your surname?</label>
                    <input id="surname-input" name="name" type="text" placeholder="surname" required />
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('surname','email')">OK
                            <i class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('surname','firstname')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('surname','email')"></i>
                    </div>
                </label>

                <label id="email">
                    <label class="label-heading" for="email">Your email address</label>
                    <input id="email-input" type="email" name="email" placeholder="email" required />
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next"
                            onclick="next('email','mobile')">OK</button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('email','surname')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('email','mobile')"></i>
                    </div>
                </label>

                <label id="mobile">
                    <label class="label-heading" for="mobile">Phone number</label>
                    <input id="mobile-input" type="tel" name="mobile" placeholder="mobile" required />
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('mobile','address')">OK <i
                                class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('mobile', 'email')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('mobile','address')"></i>
                    </div>
                </label>

                <label id="address">
                    <label class="label-heading" for="address">What's your address?</label>
                    <input name="address" id="address-box" type="text" placeholder="address" required />
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('address','unit')">OK <i
                                class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('address', 'mobile')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('address','unit')"></i>
                    </div>
                </label>

                <label id="unit" class="form-check">
                    <label class="label-heading" for="mobile">Which Unit Are You Interested In?</label>

                    <input type="radio" id="unit-1" name="unit" value="2 Bedroom SP750">
                    <label class="label-small" for="unit-1">2 Bedroom SP750</label>

                    <input type="radio" id="unit-2" name="unit" value="1 Bedroom SP540">
                    <label class="label-small" for="unit-2">1 Bedroom SP540</label>

                    <input type="radio" id="unit-3" name="unit" value="1 Bedroom SP430">
                    <label class="label-small" for="unit-3">1 Bedroom SP430</label>

                    <input type="radio" id="unit-4" name="unit"
                        value="Don't know yet, I would like to understand my options">
                    <label class="label-small" for="unit-4">Don't know yet, I would like to understand my
                        options</label>

                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('unit','usage')">OK <i
                                class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('unit', 'address')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('unit','usage')"></i>
                    </div>
                </label>

                <label id="usage" class="form-check">
                    <label class="label-heading" for="mobile">What's your intended usage?</label>
                    <div>
                        <input class="custom_radio" type="radio" id="usage-1" name="usage" value="Rental income">
                        <label class="label-small" for="usage-1">Rental Income</label>

                        <input class="custom_radio" type="radio" id="usage-2" name="usage" value="Family member">
                        <label class="label-small" for="usage-2">Family member</label>

                        <input class="custom_radio" type="radio" id="usage-3" name="usage"
                            value="Some fun additional space!">
                        <label class="label-small" for="usage-3">Some fun additional space!</label>
                    </div>
                    <br>
                    <div class="nav-btn-div">
                        <button type="button" class="nav-button" value="next" onclick="next('usage','finance')">OK <i
                                class="fa fa-check" aria-hidden="true"></i></button>
                        Press <strong>Enter ↵</strong>
                    </div>

                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('usage', 'unit')"></i>
                        <i class="fa fa-arrow-down" style="font-size:24px" onclick="next('usage','finance')"></i>
                    </div>
                </label>

                <label id="finance" class="form-check">
                    <label class="label-heading" for="mobile">Would you be interested in our financing services?</label>
                    <div>
                        <input type="radio" id="finance-1" name="finance" value="Yes">
                        <label class="label-small" for="finance-1">Yes</label>

                        <input type="radio" id="finance-2" name="finance" value="No">
                        <label class="label-small" for="finance-2">No</label>
                    </div>
                    <br>
                    <div class="nav-btn-div">
                        <i class="fa fa-arrow-up" style="font-size:24px" onclick="previous('finance', 'usage')"></i>

                        <button id="submit-button" class="nav-button">Submit</button>
                    </div>
                </label>

                <p id="validate"></p>
            </form>
        </section>
    </div>
</body>

<footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.3/jquery.scrollTo.min.js"
        integrity="sha512-PsJ1f4lw0Jrga4wbDOvdWs9DFl88C1vlcH2VQYqgljHBmzmqtGivUkzRHWx2ZxFlnysKUcROqLeuOpYh9q4YNg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKfKnPH_xnqg_uPpBN4Wl6oecnIZXIqhw&#038;libraries=places&#038;ver=1.0"
        id="google-maps-js"></script>
    <script src="script.js"></script>

    <script>
        let params = undefined;

        $("#contact-form").submit((e) => {
            if (params == undefined)
                return;

            let body = {
                firstname: document.getElementById('firstname-input').value,
                surname: document.getElementById('surname-input').value,
                email: document.getElementById('email-input').value,
                phone: document.getElementById('mobile-input').value,
                street: params.street,
                city: params.city,
                state: params.state,
                zip: params.zip,
                unit: document.querySelector('input[name="unit"]:checked').value,
                usage: document.querySelector('input[name="usage"]:checked').value,
                finance: document.querySelector('input[name="finance"]:checked').value === 'Yes'
            }

            $.ajax({
                url: 'https://sonderpods.com/wp-json/zoho-module-bind/v1/create-lead?token=default',
                type: 'POST',
                data: JSON.stringify(body),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                complete: (xhr, status) => {
                    window.location.params = '';
                    window.location.replace('https://sonderpods.com/contact-thankyou/');
                }
            });

            e.preventDefault();
        });

        const initialize = () => {
            let input = document.getElementById('address-box');
            let options = {
                types: ['address'],
                componentRestrictions: {
                    country: 'us'
                }
            };

            autocomplete = new google.maps.places.Autocomplete(input, options);

            const place_changed = () => {
                params = undefined;

                const place = autocomplete.getPlace();

                if (place === undefined)
                    return;

                zip = undefined;
                for (var i = 0; i < place.address_components.length; i++) {
                    for (var j = 0; j < place.address_components[i].types.length; j++) {
                        if (place.address_components[i].types[j] == "postal_code") {
                            zip = place.address_components[i].long_name;

                            break;
                        }
                    }
                }

                if (zip === undefined)
                    return;

                const parts = place.formatted_address.split(',');

                const street = parts[0];
                const city = parts[1].substring(1);
                let state = parts[2].substring(1);

                let stateNum = state.indexOf(' ');

                if (stateNum !== -1)
                    state = state.substring(0, stateNum);

                params = {
                    street: street,
                    city: city,
                    state: state,
                    zip: zip
                }
            };

            if (input.value !== '')
                place_changed();

            google.maps.event.addListener(autocomplete, 'place_changed', place_changed);
        }

        google.maps.event.addDomListener(window, "load", initialize);
    </script>
</footer>

</html>